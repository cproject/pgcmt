<script type='text/javascript' src='http://code.jquery.com/jquery-1.8.2.js'></script>
<script type="text/javascript">

function controlButton(attribute,value,status)
{
     if (status == "ENABLE")
    {
        $(attribute).attr("disabled",false);
        $(attribute).css("background","#00386b");
        $(attribute).val("Create");
    }
    else if (status == "DISABLE")
    {
        $(attribute).attr("disabled",true);
        $(attribute).css("background","#999");
        $(attribute).val("waiting");
    }
    else
        alert("false status");
}
function resetVal(itemList)
{
    $(itemList).val(null);
}

function submitForm()
{  
        $.ajax({
            type: "POST",
            url: $("#createProjectForm").attr("action"),
            data: $("#createProjectForm").serialize(),
            dataType: "json",
            beforeSend: function() {
               controlButton("#sendButton","Create","DISABLE");
                $("#status").hide();
                $("#id_name,#id_description").attr("disabled",true);
            },
            success: function(response,code) {
                controlButton("#sendButton","Create","ENABLE");
                if(response=="1")
                {
                    $("#status").show().html('<div id="basarili"> <div class="baslik"> Project created! </div></div>');
                    resetVal("#id_name,#id_description");
                }
                else
                {
                    $("#status").show().html('<div id="hata"> <div class="baslik"> Form is invalid! </div></div>');
                }
                $("#id_name,#id_description").attr("disabled",false);
            },
            error: function(jqXHR, textStatus, errorMessage) {
                controlButton("#sendButton","Create","ENABLE");
                $("#status").show().html('<div id="hata"> <div class="baslik">'+textStatus+'</div> </div>');
            }
        });  
}

</script>

{% extends "base.html" %}  

{% block content %}
<h1>Create Project</h1>
<table class="create_form">

    <form action="/create/project_ajax/" method="post" id="createProjectForm">{% csrf_token %}
    {{ form.as_table }}
    <tr>
        <td> </td>
        <!--<td> <input type="submit" value="Create" id="sendButton" style="width:200px;height:30px"/> </td>-->
        <td> <input type="button" value="Create" id="sendButton" style="width:200px;height:30px" onclick="submitForm()"/> </td>
    </tr>
    <tr>
        <td></td>
        <td><div id="status" style=""> </div></td>
    </tr>
    </form>
  
</table>
{% endblock %}